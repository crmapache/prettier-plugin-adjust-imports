import Fuse from 'fuse.js'
import './styles.scss'
import { BlackTransparentMask } from '../../SharedPageMask'
import { ACCORDEON_DATA, TAB_OPTIONS, TABS_TO_SHOW } from './Faq.constants'
import emptySearchResultSadFace from '@assets/svg/empty-search-result-sad-face.svg'
import {
  FaqWrap,
  ShowAllButtonWrap,
  ShowAllButton,
  EmptySearchResultWrap,
  TabsWrap,
} from './Faq.elements'
import Image from 'next/image'
import { ShowAllButtonBackground } from './ShowAllButtonBackground'
import { BackdropWrap, Backdrop } from '../FrontBackdrop'
import {
  SearchInput,
  Tabs,
  Accordeon,
  Typography,
  Box,
  SecondaryButton,
  AccordeonElement,
} from '@core'
import debounce from "lodash/debounce"
import { useMemo, useState } from 'react'

export const TerminalContactCreateSubFormItem = ({
  namePrefix,
  addButtonTitle,
  onAdd,
  isFormInitialVisible,
}: TerminalContactCreateSubFormItemProps) => {
  const [isFormVisible, setIsFormVisible] = useState(isFormInitialVisible);

  const styles = useStyles();

  const onAddButtonHandler = () => {
    if (onAdd) onAdd();
    setIsFormVisible(true);
  };

  return (
    <div css={styles.container}>
      {isFormVisible ? (
        <Form autoComplete="off" style={styles.form}>
          <div css={styles.gridBox}>
            <FormikTextField name={`${namePrefix}.name`} placeholder="Name" />
          </div>

          <div css={styles.gridBox}>
            <FormikTextField name={`${namePrefix}.department`} placeholder="Department" />
          </div>

          <div css={styles.gridBox}>
            <FormikTextField
              variant="phone"
              name={`${namePrefix}.phoneNumber`}
              placeholder="Phone Number"
            />
            <FormikTextField
              variant="phone"
              name={`${namePrefix}.mobileNumber`}
              placeholder="Mobile Number"
            />
          </div>

          <div css={styles.gridBox}>
            <FormikTextField name={`${namePrefix}.email`} placeholder="Email" />
          </div>
        </Form>
      ) : (
        <Button
          variant="text"
          endIcon={
            <Icon variant="display" name="plus-circle" title="Add Contact" color="primary" />
          }
          onClick={onAddButtonHandler}
        >
          {addButtonTitle}
        </Button>
      )}
    </div>
  );
};
